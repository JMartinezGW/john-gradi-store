<link rel="stylesheet" href="{{ 'section-main-page.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-rte.css' | asset_url }}" media="print" onload="this.media='all'">

<noscript>{{ 'section-main-page.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-rte.css' | asset_url | stylesheet_tag }}</noscript>

<div class="page-width page-width--narrow">
  <h1 class="main-page-title page-title h0">
    {{ page.title | escape }}
  </h1>
  <div class="rte">
    {{ page.content }}
    {% for product in collections[settings.home_featured_collection].products %}
        {{ product.title }}
    {% endfor %}
    {% for produc in all_products %}
        {{ produc }}
    {% endfor %}
    {% for product in products %}
        {{ product }}
    {% endfor %}
    collection
    {% for collection in product.collections %}
        {{ collection.title }}
    {% endfor %}
    {%- for collection in collections -%}
      <li class="collection-list__item grid__item">
        <a{% if collection.all_products_count > 0 %} href="{{ collection.url }}"{% endif %}
          class="card animate-arrow{% if collection.featured_image != blank %} card--media{% else %}{% if section.settings.image_ratio != 'adapt' %} card--stretch{% endif %}{% endif %}{% unless section.settings.image_padding %} card--light-border{% endunless %}"
        >
          <div class="card--stretch card-colored color-{{ section.settings.color_scheme }}">
            {%- if collection.featured_image != blank -%}
              <div{% if section.settings.image_padding %} class="card__media-spacer"{% endif %}>
                {% if section.settings.image_padding %}<div class="overlay-card"></div>{% endif %}
                <div class="media media--{{ section.settings.image_ratio }} media--hover-effect overflow-hidden"
                  {% if section.settings.image_ratio == 'adapt' %}style="padding-bottom: {{ 1 | divided_by: collection.featured_image.aspect_ratio | times: 100 }}%;"{% endif %}>

                  <img
                    srcset="{%- if collection.featured_image.width >= 165 -%}{{ collection.featured_image | img_url: '165x' }} 165w,{%- endif -%}
                      {%- if collection.featured_image.width >= 360 -%}{{ collection.featured_image | img_url: '360x' }} 360w,{%- endif -%}
                      {%- if collection.featured_image.width >= 535 -%}{{ collection.featured_image | img_url: '535x' }} 535w,{%- endif -%}
                      {%- if collection.featured_image.width >= 750 -%}{{ collection.featured_image | img_url: '750x' }} 750w,{%- endif -%}
                      {%- if collection.featured_image.width >= 1000 -%}{{ collection.featured_image | img_url: '1000x' }} 1000w,{%- endif -%}
                      {%- if collection.featured_image.width >= 1500 -%}{{ collection.featured_image | img_url: '1500x' }} 1500w,{%- endif -%}"
                    src="{{ collection.featured_image | img_url: '1500x' }}"
                    sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 | divided_by: 3 }}px, (min-width: 750px) calc((100vw - 130px) / 3), calc(100vw - 30px)"
                    alt="{{ collection.title | escape }}"
                    height="{{ collection.featured_image.height }}"
                    width="{{ collection.featured_image.width }}"
                    loading="lazy"
                  >
                </div>
              </div>
              <div class="card__text card__text-spacing card__text-hover">
                {% unless section.settings.image_padding %}<div class="overlay-card"></div>{% endunless %}
                <h2 class="h3">{{- collection.title -}}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span></h2>
              </div>
            {%- else -%}
              <div class="overlay-card"></div>
              <div class="card__text-spacing card__text-hover">
                <h2 class="h1">
                  {{- collection.title -}}{%- if collection.description == blank -%}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span>{% endif %}
                </h2>

                {%- if collection.description != blank -%}
                  <p>
                    {{- collection.description | strip_html | truncatewords: 12 -}}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span>
                  </p>
                {%- endif -%}
              </div>
            {%- endif -%}
          </div>
        </a>
      </li>
    {%- endfor -%}
  </div>
</div>

{% schema %}
{
  "name": "t:sections.main-page.name",
  "tag": "section",
  "class": "spaced-section"
}
{% endschema %}
