{{ 'section-productpage.css' | asset_url | stylesheet_tag }}

<script src="{{ 'section-productpage.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'slider.js' | asset_url }}" defer="defer"></script>
{% assign colors = settings.colors_products | newline_to_br | split: "<br />" %}
{% style %}
    {% for color in colors %}
        {% assign colorObject = color | split: ":" %}
        .bg_{{ colorObject[0] | strip }} {
            background: {{ colorObject[1] }};
        }
    {% endfor %}
{% endstyle %}
<div class="row">
    <div class="col-1"></div>
    <div class="col-md-7 col-xs-10">
            <img
                class="product__image"
                id="product-image"
                src="{{ product | img_url: 'large' }}"
            >
    </div>
    <div class="col-md-3 col-xs-10">
        <b>{{ product.title }}</b>
        <p id="product-price">{{ product.price | money }}</p>
        <b>
            Colores: 
            <div class="product__variants">
                {% for variant in product.variants %}
                    <input 
                        type="radio"
                        id="{{ variant.id }}"
                        name="variant"
                        value="{{ variant.id }}"
                        class="product__variant"
                        data-variant="{{ variant.id }}"
                        data-image="{{ variant.image.src | img_url: 'large' }}"
                        data-price="{{variant.price | money}}"
                    >
                    <label for="{{ variant.id }}" class="product__variant__label bg_{{ variant.title }}">
                    </label>
                {% endfor %}
            </div>
            
        </b>
        <br>
        <br>
        <a
            href="#"
            class="product__btn"
            id="btn-add-cart"
            data-bundle="{{ product.metafields.my_fields.bundle.value }}"
        >
            Add to Cart
        </a>
    </div>
    <div class="col-1"></div>
</div>
<div id="modal-bundle" class="modal">
    <div class="modal-content">
        <span class="close" id="close-modal">&times;</span>
        <p>Some text in the Modal..</p>
    </div>
</div>
<br>
<br>
<br>
{% assign images = product.metafields.my_fields.image.value %}
{% assign titles = product.metafields.my_fields.title.value %}
{% assign descriptions = product.metafields.my_fields.description.value %}
{%- if images.size > 1 -%}
<div class="row">
    <div class="col-7">
        <div class="container-slider">
            <div 
                class="slider"
                id="slider"
                style="width: {{ images.size }}00%;"
                data-titles='{{titles | json}}'
                data-descriptions='{{descriptions | json}}'
            >
                {% for itemSlider in images %}
                    <div class="slider__section">
                        <img 
                            src="{{ itemSlider.image }}"
                            class="slider__img">
                    </div>
                {% endfor %}
                <div class="slider__btn slider__btn--right" id="btn-right">&#62;</div>
                <div class="slider__btn slider__btn--left" id="btn-left">&#60;</div>
            </div>
        </div>
    </div>
    <div class="col-3">
        <div id="info">
            Hola mundo
        </div>
    </div>
</div>
{%- elsif images.size == 1 -%}
<div class="row">
    <div class="col-7">
        <div class="container-slider">
            <img 
            src="{{ images[0].image }}"
            class="slider__img">
        </div>
    </div>
    <div class="col-3">
        <div id="info">
            <h2>{{ titles[0].title }}</h2>
            {{ descriptions[0].description }}
        </div>
    </div>
</div>
{%- endif -%}

{% schema %}
{
    "name": "productpage",
    "tag": "section",
    "class": "spaced-section",
    "settings": [
        {
            "type": "product",
            "id": "product",
            "label": "Product"
        }
    ]
}
{% endschema %}